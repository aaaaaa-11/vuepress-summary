# 进程与线程

进程是一个程序运行的实例，操作系统会为每个进程分配独立的内存，用来存放代码和数据。一般一个进程会包含一个主线程和多个子线程，这些线程共享系统分配给进程的内存。

进程与进程之间相互隔离，一个进程崩溃不会影响其他进程。进程之间可以通过IPC机制通信。

进程所占资源会在关闭后由操作系统回收，包括内存泄漏。

浏览器最开始是单进程，有以下隐患：

  - 性能问题
    - 可能导致页面内存泄漏：一个页面关闭，内存可能不完全回收；
    - 一个线程可能运行多个模块，某个模块可能阻塞其他任务执行。

  - 安全性问题：有些插件可能运行恶意脚本，利用漏洞来获取页面权限。

  - 稳定性问题：页面渲染引擎崩溃、插件不稳定都可能会导致浏览器崩溃。

多进程浏览器：

  - 主进程：管理菜单栏、标题栏、文件访问、网页的前进、后退以及子进程管理等

  - GPU进程：最初是为了使用3D的CSS效果，现在很多浏览器都有单独的GPU进程

  - 插件进程：单独的插件进程可以使得某个插件崩了，不影响页面和浏览器，而且它是沙箱模式，更安全，限制了插件恶意获取浏览器读、写等权限

  - 网络进程：用于网络资源加载

  - 渲染进程：是浏览器的内核，为每个标签页开辟独立的进程，将HTML、CSS、JavaScript资源渲染成页面，也是沙箱模式。